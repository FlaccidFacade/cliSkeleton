# cliSkeleton
a base hello world outline for a cli tool

this repository uses python3.9 and click module to create 
the cli tool

the testing framework is pytest

# First time use
0) Clone/fork the repo

```
git clone https://github.com/FlaccidFacade/cliSkeleton.git
```


1) Python

 Make sure python 3.9 is installed

```
python3 --version
```

 This project is created with 3.9.9

2) Virtual environment

 either use the specific version of python itself
 or use virtualenv and specify

 both create a venv folder in the root dir but
 virtualenv is an extra dependency that can be used if
 you choose to use a lower version of python like python2

 python:

```
python3.9 -m venv venv
```

 virtualenv:

```
virtualenv --python=python3.9 venv
``` 

3) Activate Virtual Env

 in the same folder the virtual environment was created run:

```
source venv/bin/activate
```

 To stop the running invironment run:

```
deactivate
```

4) Dependencies/Requirements

 The requirements.txt file holds all the needed 
 packages for this project. 
 
 This is really the development requirements as it includes 
 the testing framework

  **Note: be sure to adjust this as your project grows 
  and that your virtual environment is activated

```
pip install -r dev_requirements.txt
```

5) Using Cli

 This allows for modules and commands to be simultaneously
 updated and usable

```
pip install -e .
```

 
6) Testing


 To run all tests use python3 and root test directory

 without coverage:

```
python3 -m pytest test/
```

 with coverage:

```
python3 -m pytest --cov=src test/
```

 with coverage report:

```
python3 -m pytest --cov-report xml:cov.xml --cov=src test/
```

testing the cli script from the click documents recommends:

"""
To test the script, you can make a new virtualenv and then install your package:

virtualenv venv
. venv/bin/activate
pip install --editable .

Afterwards, your command should be available:

$ yourscript
Hello World!

"""

But i think end2end testing is important so lets go one step further
"""
For basic testing, Click provides the click.testing module which provides test functionality that helps you invoke command line applications and check their behavior.

These tools should really only be used for testing as they change the entire interpreter state for simplicity and are not in any way thread-safe!
"""

Click testing guide: https://click.palletsprojects.com/en/8.0.x/testing/?highlight=test


## Coverage

One of the keys to faster and more effective testing is
analyzing test cases with coverage reports

This project uses pytest-cov (and therefore also coverage.py)
https://github.com/pytest-dev/pytest-cov

pytest docs for ref:
https://docs.pytest.org/en/6.2.x/

I like to use a visual representation for coverage report that
maps what lines of code are covered or not with color.

"coverage gutters" vscode extenstion creates an easy to view coverage report

Name: Coverage Gutters
Id: ryanluker.vscode-coverage-gutters
Description: Display test coverage generated by lcov or xml - works with many languages
Version: 2.8.2
Publisher: ryanluker
VS Marketplace Link: https://marketplace.visualstudio.com/items?itemName=ryanluker.vscode-coverage-gutters


## CREDIT
ignore file is orginally sourced from here: 
https://github.com/muhammad-mamdouh/Django_Projects/blob/1f31e12aefb36b33474256db40a2c551882f445e/src/.gitignore
